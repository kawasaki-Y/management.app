

# ①課題番号-プロダクト名

- 課題番号：8 　pythonとライブラリを活用した経営DB

## ②課題内容（どんな作品か）

この課題はPythonで作成しており、データベースはsqlite3を使っています。データベースの設計はdatabase.pyファイルをご覧ください。
コンセプトは売上管理、原価管理、販管費管理、利益管理、資金管理の各ページで数値データをグラフ反映するなど、経営データを効果的に管理・可視化するためのダッシュボードを想定したものです。
課題提出にあたり、以下の機能を備えています：

【課題提出上、必須の機能】
・データの登録・参照　⇨　sqlite3をdatabase.pyでインポートしてます。このことで、売上管理等で入力したデータが、データベースに登録・参照されます。
・データのSQLファイルエクスポート機能　⇨ SQLファイルの提出が必須とのことで、ダウンロードする機能を設けました。ダウンロードすると、現在蓄積されたDB内容が確認はできます。この点についてはコードレビュー会で説明いたします。


※今回データベースの登録と参照は左メニューの売上管理で実装してます。参照ファイルはsales_management.pyです。売上管理のページのうち、売上データの項目でデータベースの登録と参照を反映してます。

- deployはstreamlit Cloudから行いました。
streamlit Cloud : https://streamlit.io/generative-ai

## ③DEMO


## ④作ったアプリケーション用のIDまたはPasswordがある場合

なし

## ⑤工夫した点・こだわった点
- 前回の課題提出でクリアにならなかった点は、次の通りに解決しました。
❶データベース設計
・複数のテーブルを統一的に管理し、データの整合性を確保した。
・SQLite データベースを使用し、今回の課題テーマである簡易的なデータ登録と参照を実装。
❷機能の汎用性
・売上データをタグ付けして分類・集計が可能。
・年間目標売上と実績の予実比較を資格的に確認できるようにした。
❸UI/UX
・Streamlit を活用し、ユーザーが直感的に操作できる見た目で整えた。
・Altairライブラリ を利用した数値のグラフ化。
❹データエクスポート
・SQL ファイルへのダウンロード。今回の課題テーマでSQLファイル提出があったため、この機能を盛り込んだ。
❺Python 構文の理解
・FOR文やCLASS構造 を活用して効率的なコード管理。
・DICT関数 で柔軟なデータ操作を実現。

- それ以外は次の通りです。
❶Pythonのライブラリを色々と試してみました。使用したライブラリは「requirements.txt」にまとめています。
❷Excelダウンロード時のヘッターの設定をしてます。この辺の設定は、JavaScriptよりもPythonの方が柔軟に設定できます。


## ⑥難しかった点・次回トライしたいこと(又は機能)

グラフの PowerPoint エクスポートの実装が今回うまくいきませんでした。
デプロイ時のエラーが頻発しました。requirements.txtの記載ミスでした。
他にもたくさんあります。




## ⑦質問・疑問・感想、シェアしたいこと等なんでも

❶本プロジェクトでは、効率的なデータ操作と拡張性を考慮した SQLite を使用し、以下のテーブルを設計しました：

・sales（売上データ）

案件ごとの売上情報を管理。
タグで売上データを分類し、タグ別の集計や分析を容易に。

・主なカラム：

id (主キー): 一意のIDで各データを識別。
project (案件名): 案件を識別するための名称。
tag (タグ): 売上データを分類するためのカテゴリ。
revenue (売上高): 収益データ。
date (日付): 売上が発生した日。
target_revenue（目標売上）

年間の目標売上高を管理。
売上データと比較して予実分析を可能に。
主なカラム：

id (主キー): 一意のID。
amount (目標金額): 千円単位の目標売上。
tags（タグ情報）

分類用タグを登録。
売上データの柔軟な集計や可視化を実現。
主なカラム：

id (主キー): 一意のID。
tag_name (タグ名): タグの名前。
その他の管理テーブル

原価管理（costs）、販管費管理（sg_a_costs）、利益管理（profits）、資金管理（cashflow）のためのテーブルを設計。
各テーブルは独立してデータを管理しながらも、売上データと連携可能。


❷Python 構文の活用
このプロジェクトでは、Pythonの豊富な構文やデザインパターンを活用して、効率的で拡張性の高いコードを構築しました。
1. クラス設計（Database クラス）
役割:
データベース操作を一元管理。
各種クエリ（登録・参照・更新・削除）の汎用メソッドを提供。
主なメソッド:
init_db(): 必要なテーブルを作成し、アプリケーション初期化時にデータベースをセットアップ。
execute_query(query, params): 動的なクエリ実行を可能にするメソッド。
fetch_data(query, params): データ取得用の汎用メソッド。
2. 繰り返し処理（FOR文の活用）
売上データの表示・操作を効率化するため、 FOR文 を活用。

各データ行に対して修正ボタンや削除ボタンを動的に生成する仕組みを実装。

3. DICT関数の活用
データ操作やグラフ生成で、 DICT関数 を使用して簡潔なデータ構造を実現。
グラフ用データを辞書形式で生成し、DataFrameに変換。

4. モジュール分割
各機能（売上管理、原価管理など）を独立したファイルに分割。
コードの見通しが良くなり、保守性が向上。